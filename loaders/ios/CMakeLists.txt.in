cmake_minimum_required (VERSION 2.8)
project (@SYS_APPNAME@)
set(NAME @SYS_APPNAME@)
file(GLOB headers *.h)
file(GLOB sources *.m *.mm)
file(GLOB sounds *.wav *.ogg)
file(GLOB pngs *.png)
SET(TARGETSDK @SYS_IOSSDK@)
SET(CMAKE_OSX_SYSROOT /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/${TARGETSDK})
SET (CMAKE_OSX_ARCHITECTURES "armv6" "armv7")
#SET (CMAKE_OSX_ARCHITECTURES "$(ARCHS_UNIVERSAL_IPHONE_OS)")
#SET (CMAKE_OSX_ARCHITECTURES $(ARCHS_STANDARD_32_BIT))
#set (CMAKE_C_FLAGS "")
set (CMAKE_C_FLAGS "-mno-thumb")
set (CMAKE_CXX_FLAGS "-headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden")
set(CMAKE_EXE_LINKER_FLAGS "-framework CoreFoundation -framework Foundation -framework UIKIt -framework AVFoundation -framework OpenGLES -framework QuartzCore -framework MediaPlayer -framework CoreLocation -framework CoreAudio -framework CoreGraphics -framework AssetsLibrary -framework AudioToolbox -framework CoreMotion"
)
link_directories(@SYS_PREFIX@/lib)
include_directories (@SYS_PREFIX@/include)
set(MACOSX_BUNDLE_GUI_IDENTIFIER "@SYS_ORGTLD@.@SYS_ORGSLD@.@SYS_LOCASEAPPNAME@")
set(APP_TYPE MACOSX_BUNDLE)
SET_SOURCE_FILES_PROPERTIES( ${pngs} PROPERTIES MACOSX_PACKAGE_LOCATION Resources )
SET_SOURCE_FILES_PROPERTIES( ${sounds} PROPERTIES MACOSX_PACKAGE_LOCATION Resources )
add_executable(${NAME} ${APP_TYPE} ${pngs} ${headers} ${sources} ${sounds} )
target_link_libraries(${NAME} libpayload.a)
set_target_properties(${NAME} PROPERTIES XCODE_ATTRIBUTE_IPHONEOS_DEPLOYMENT_TARGET "@SYS_IOSVERSION@")
set_target_properties(${NAME} PROPERTIES MACOSX_BUNDLE_INFO_PLIST "@SYS_PREFIXROOT@/build/@SYS_APPNAME@/Info.plist")
set_target_properties(${NAME} PROPERTIES XCODE_ATTRIBUTE_TARGETED_DEVICE_FAMILY "1,2")
set_target_properties(${NAME} PROPERTIES XCODE_ATTRIBUTE_CODE_SIGN_IDENTITY "@SYS_IOSCERT@")
set_target_properties(${NAME} PROPERTIES XCODE_ATTRIBUTE_CODE_SIGN_RESOURCE_RULES_PATH "@SYS_PREFIXROOT@/build/@SYS_APPNAME@/ResourceRules.plist")
set_target_properties(${NAME} PROPERTIES XCODE_ATTRIBUTE_COMBINE_HIDPI_IMAGES "NO")
set_target_properties(${NAME} PROPERTIES XCODE_ATTRIBUTE_ENABLE_BITCODE "NO")
